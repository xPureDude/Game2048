cmake_minimum_required(VERSION 3.20)

project(PureGame2048
    VERSION "0.1.0"
    LANGUAGES CXX
)

set(SFML_ROOT "E:/case/Dependencies/SFML-3.0.0")
set(CMAKE_CXX_STANDARD 20)

set(project_output_directory "${CMAKE_CURRENT_SOURCE_DIR}/bin")
set(targetSourceDir "${CMAKE_CURRENT_SOURCE_DIR}/src")

find_package(SFML REQUIRED System Window Graphics Main)

file(GLOB_RECURSE headerFiles "${targetSourceDir}/*.hpp")
file(GLOB_RECURSE srcFiles "${targetSourceDir}/*.cpp")

add_executable(${PROJECT_NAME} ${headerFiles} ${srcFiles})

target_precompile_headers(${PROJECT_NAME} PRIVATE "${targetSourceDir}/pch.hpp")
target_include_directories(${PROJECT_NAME} 
    PUBLIC "${SFML_ROOT}/include"
    PUBLIC "${CMAKE_CURRENT_SOURCE_DIR}/src"
)
target_link_libraries(${PROJECT_NAME} PUBLIC SFML::Main SFML::Window SFML::Graphics SFML::System)

set_target_properties(${PROJECT_NAME} PROPERTIES 
    RUNTIME_OUTPUT_DIRECTORY "${project_output_directory}"
    VS_DEBUGGER_WORKING_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/../"
)

if(WIN32)
    set_target_properties(${PROJECT_NAME} PROPERTIES
                          LINK_FLAGS "/SUBSYSTEM:WINDOWS")
endif()